<html>
    <header>
      <title> $$$$$$$$$$$$$$$$$$$$$$ </title>
	<meta charset="UTF-8" />
      <link href="index.css" rel="stylesheet" />
    </header>
  <body id="body">
      <img class="coin" id="coin1" src="src/coin.png">
      <img class="coin" id="coin2" src="src/coin.png">
      <img class="coin" id="coin3" src="src/coin.png">
      <img class="coin" id="coin4" src="src/coin.png">
      <img class="coin" id="coin5" src="src/coin.png">
      <img class="coin" id="coin6" src="src/coin.png">
      <img class="coin" id="coin7" src="src/coin.png">
      <img class="coin" id="coin8" src="src/coin.png">
      <img class="coin" id="coin9" src="src/coin.png">
      <img class="coin" id="coin10" src="src/coin.png">
      <img class="coin" id="coin11" src="src/coin.png">
      <img class="coin" id="coin12" src="src/coin.png">
      <img class="coin" id="coin13" src="src/coin.png">
      <img class="coin" id="coin14" src="src/coin.png">
      <img class="coin" id="coin15" src="src/coin.png">
      <img class="coin" id="coin16" src="src/coin.png">
      <img class="coin" id="coin17" src="src/coin.png">
      <img class="coin" id="coin18" src="src/coin.png">
      <img class="coin" id="coin19" src="src/coin.png">
      <img class="coin" id="coin20" src="src/coin.png">
      <img class="coin" id="coin21" src="src/coin.png">
      <img class="coin" id="coin22" src="src/coin.png">
      <img class="coin" id="coin23" src="src/coin.png">
      <img class="coin" id="coin24" src="src/coin.png">
      <img class="coin" id="coin25" src="src/coin.png">
      <img class="coin" id="coin26" src="src/coin.png">
      <img class="coin" id="coin27" src="src/coin.png">
      <img class="coin" id="coin28" src="src/coin.png">
      <img class="coin" id="coin29" src="src/coin.png">

      <img class="head" src="src/head.png" />
      <img class="head" id="glow" src="src/head_dollar.png" />
      <img id="prippan" src="src/laproaigh.png" />
      <div id="bild">
        <img class="image" src="./src/fredag.png">    
      </div>
      <img onclick="add_strobe()" id="lob_bild" src="src/bag_of_gold.png" />
      
      <h3 id="counter">1</h3>
      <script>
        var audio = new Audio('src/pengar.mp3');
        var counter = 0;

        var rainInterval;
        spawn_coins()
        var counter_element = document.getElementById('counter');
        counter_element.innerHTML = counter;
        counter_element.style.display = "none"; 
        var toggle_strobe = true;

        setTimeout(() => {
          document.getElementById('glow').style.display = "block";
          var prippan = document.getElementById("prippan");
          prippan.style.display = "block";
          prippan.classList.add("prippan-animate");

          setTimeout(() => {
            prippan.classList.add("prippan-drink");
            var lob_bild = document.getElementById("lob_bild");
            lob_bild.style.display = "block";
            counter++;
            counter_element.innerHTML = counter;
            counter_element.style.display = "block"; 
            setInterval(() => {
                counter++;
                counter_element.innerHTML = counter;
            }, 5000);
          }, 10000);

        }, 50);

      function add_strobe () {
        var prippan = document.getElementById("prippan");
        if (toggle_strobe === true) {
          var body = document.getElementById("body").classList.add("body-strobe")
          rain_money()
          audio.play();
          toggle_strobe = false;
        } else {
          var body = document.getElementById("body").classList.remove("body-strobe")
          stop_money()
          audio.pause();
          toggle_strobe = true;
        }
      } 

      function spawn_coins () {
          for (i = 1; i < 30; i++) {
            var offset = 50 + Math.random()*10
            var coin = document.getElementById("coin" + i) 
            coin.style.left = 10 + i*50
          }
      } 

      function stop_money() {
        clearInterval(rainInterval)
        for (i = 1; i < 30; i++) {
          var offset = 50 + Math.random()*10
          var coin = document.getElementById("coin" + i) 
          coin.style.top = -200
        }
      }

      function rain_money () {
          var coinOffsets = new Array(29).fill(0)
          coinOffsets = coinOffsets.map(x => x -= Math.random() * innerHeight)
        rainInterval = setInterval(function () {
          for (i = 1; i < 30; i++) {
            var offset = 50 + Math.random()*10
            coinOffsets[i-1] += offset
            var coin = document.getElementById("coin" + i) 
            coin.style.top = coinOffsets[i-1]
            console.log(coinOffsets)
            if (coinOffsets[i-1] > innerHeight) {
                coin.style.top = -200
                coinOffsets[i-1] = 0
            }
          }
        } , 100)
      } 

      </script>
  </body>
</html>
